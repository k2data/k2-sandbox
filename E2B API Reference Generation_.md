# **E2B Code Interpreter Python SDK API Reference**

## **I. Introduction**

### **A. Overview of e2b-code-interpreter Python SDK**

The e2b-code-interpreter Python SDK serves as the primary interface for Python developers seeking to leverage E2B's secure cloud execution environments.1 It is a key component of E2B's broader open-source ecosystem, which includes infrastructure components, other SDKs (JavaScript/TypeScript), and example applications.3 This specific SDK is tailored for interactions requiring stateful code execution, mimicking the behavior of tools like Jupyter notebooks, making it particularly well-suited for AI applications.5 It appears to be built upon or closely related to the core e2b Python SDK, providing a specialized interface for code interpretation tasks.6

### **B. Core Purpose and Technology**

The fundamental purpose of the e2b-code-interpreter SDK is to enable developers to programmatically instantiate, manage, and interact with secure, isolated cloud environments known as sandboxes.1 These sandboxes are specifically designed for executing code that may be untrusted, such as code generated by Large Language Models (LLMs).1

The underlying technology relies on Firecracker microVMs, which provide strong hardware-virtualization-based isolation, considered more secure than traditional containerization for running arbitrary code.5 E2B emphasizes this security aspect as a key differentiator.5 Within these microVMs, the code-interpreter functionality often utilizes a Jupyter server backend, allowing for stateful code execution through the Jupyter Kernel Messaging Protocol.5 This architecture enables persistent state (variables, installed packages within a session) across multiple code execution calls within the same sandbox instance.11

### **C. Intended Use Cases**

The SDK facilitates a variety of use cases centered around secure and stateful code execution, particularly in the context of AI applications:

* **AI-driven Data Analysis and Visualization:** Executing Python code (often generated by LLMs) to analyze datasets (e.g., CSV files) and generate charts or visualizations using libraries like Matplotlib.5  
* **Running LLM-Generated Code:** Providing a safe environment to execute code snippets produced by various LLMs across different languages (though Python is the primary focus for the interpreter).1  
* **Coding Agent Environments:** Serving as a playground or execution backend for AI agents that need to write and run code to accomplish tasks.1  
* **Code Generation Evaluation:** Creating controlled environments to test and evaluate the code generation capabilities of different models.1  
* **Building AI-Generated Applications:** Powering applications like E2B's own "Fragments" project, where AI generates full applications with user interfaces.4  
* **AI Codebase Assistants:** Enabling tools like AI copilots to interact with code repositories, run tests, or even write code within a secure sandbox.17  
* **Framework Integrations:** Integrating code execution capabilities into AI frameworks like LangChain and LangGraph.18  
* **General Secure Code Execution:** Any scenario requiring the execution of potentially untrusted code in an isolated environment with filesystem and network access.9

### **D. Note on Information Sources**

This API reference is compiled based on publicly available information, including the official E2B documentation website (https://e2b.dev/docs), the e2b-code-interpreter GitHub repository README and examples, the PyPI package description, and examples from the E2B Cookbook.1 Direct analysis of the SDK's source code files was not possible due to accessibility issues with the provided source links during research.22 Therefore, some details regarding specific parameters, return types, or internal structures may be inferred from usage examples and documentation patterns. Where information is inferred, it will be noted.

The E2B platform and its SDKs are under active development, as indicated by release histories.11 This reference aims to reflect the state based on available documentation (often referencing specific versions like v1.0.2 for the Code Interpreter Python SDK 21), but the API may evolve. Developers should always consult the latest official documentation and release notes.

## **II. Getting Started**

### **A. Installation**

The e2b-code-interpreter Python SDK is available on PyPI and can be installed using pip:

Bash

pip install e2b-code-interpreter

1

**Requirements:**

* **Python Version:** Requires Python 3.9 or newer (specifically \<4.0, \>=3.9).7  
* **Dependencies:** The SDK depends on the core e2b library and potentially others like attrs and httpx.29 Pip will handle the installation of required dependencies.

### **B. API Key Configuration**

Interaction with the E2B cloud platform requires an API key for authentication.

1. **Obtain an API Key:**  
   * Sign up for an account on the E2B website (https://e2b.dev).1  
   * Navigate to the API keys section of the E2B dashboard to generate or retrieve your key.1  
2. **Configure the SDK:**  
   * **Environment Variable (Recommended):** Set the E2B\_API\_KEY environment variable to your key value. The SDK will automatically detect and use this variable.1  
     Bash  
     export E2B\_API\_KEY="e2b\_xxxxxxxxxxxxxxxxxxxx"

   * **Direct Initialization:** Alternatively, the API key can be passed directly as a parameter (api\_key) during the instantiation of the Sandbox class.32

### **C. Basic Usage Example**

The following example demonstrates the fundamental usage pattern for creating a sandbox, executing code, and retrieving the result using the Sandbox class as a context manager:

Python

from e2b\_code\_interpreter import Sandbox

\# Ensure E2B\_API\_KEY environment variable is set or pass api\_key to Sandbox()

try:  
    \# Create and automatically manage the sandbox lifecycle  
    with Sandbox() as sandbox:  
        \# Execute the first line of code (stateful)  
        sandbox.run\_code("x \= 1")

        \# Execute the second line, which uses the state from the first execution  
        execution \= sandbox.run\_code("x \+= 1; x")

        \# Access the textual result of the second execution  
        if execution and hasattr(execution, 'text'):  
            print(f"Result: {execution.text}") \# Expected output: Result: 2  
        else:  
            print("Execution did not return a text result.")  
        \# Access logs if needed  
        if execution and hasattr(execution, 'logs'):  
             print(f"Stdout: {execution.logs.stdout}")  
             print(f"Stderr: {execution.logs.stderr}")

except Exception as e:  
    print(f"An error occurred: {e}")

\# The 'with' statement ensures sandbox.close() is called automatically

1

**Explanation:**

1. from e2b\_code\_interpreter import Sandbox: Imports the necessary class.  
2. with Sandbox() as sandbox:: Creates a Sandbox instance. The with statement ensures the sandbox is automatically closed (sandbox.close() is called) upon exiting the block, releasing cloud resources.1 This is the recommended approach for resource management.  
3. sandbox.run\_code("x \= 1"): Executes the first Python code string within the sandbox. The state (variable x) persists for subsequent calls within this sandbox instance.  
4. execution \= sandbox.run\_code("x \+= 1; x"): Executes the second code string. It increments x and then implicitly returns its value. The returned object (execution) encapsulates the results.  
5. print(f"Result: {execution.text}"): Accesses the text attribute of the execution object, which typically holds the primary textual output or result of the code execution.1

## **III. Core Concepts**

### **A. The Sandbox Environment**

The E2B Sandbox is the cornerstone of the SDK's functionality. It represents a secure, isolated cloud environment where code execution takes place.1 Think of it as a lightweight, ephemeral virtual machine provisioned specifically for a task or session.1

Key characteristics include:

* **Isolation:** Built on Firecracker microVMs, providing strong hardware-virtualized isolation between sandboxes and the host system. This is crucial for security when running untrusted code, offering a higher degree of isolation compared to container-based solutions.5  
* **Operating System:** Sandboxes run a Linux operating system, typically Debian-based, providing a familiar environment with standard tools and shell access.35  
* **Capabilities:** Within the sandbox, code has access to:  
  * A virtual filesystem for reading and writing files.33  
  * The ability to execute arbitrary system commands and processes.33  
  * Network access for tasks like installing packages or fetching data from external APIs.10  
* **Ephemeral Nature:** Sandboxes are designed to be short-lived, typically associated with a specific user session, LLM interaction, or agent task.1 They are created quickly (E2B claims \~150ms startup times 1) and are destroyed after use or timeout.  
* **Scalability:** The architecture allows for running many sandboxes concurrently.1

### **B. Stateful Execution**

A defining feature of the e2b-code-interpreter SDK is its support for *stateful* code execution.11 Unlike stateless execution models where each request starts in a clean environment, stateful execution means that the consequences of one code execution persist for subsequent executions within the *same* sandbox instance.

This persistence applies to:

* **Variables:** Variables defined in one run\_code or exec\_cell call are available in the next call.  
* **Imports:** Modules imported remain available.  
* **Filesystem Changes:** Files created or modified persist within the sandbox's lifetime.  
* **Runtime Package Installations:** Packages installed during a session (e.g., using pip via sandbox.process.start) remain available for that session.35

This statefulness is essential for iterative workflows common in data analysis (loading data once, then performing multiple analysis steps) and AI agent tasks (where an agent might need to build up context or intermediate results).5 It is enabled by the underlying Jupyter server architecture, which maintains a running kernel process within the sandbox.5

### **C. Sandbox Lifecycle**

Managing the lifecycle of a sandbox is crucial for both functionality and cost management.

1. **Creation:** A new sandbox is typically created by instantiating the Sandbox class, often within a with statement for automatic cleanup.1 Customization options like template, timeout, metadata, and envs can be provided during initialization.32  
2. **Connection:** It's possible to reconnect to an existing, running sandbox if its sandbox\_id is known, using the Sandbox.connect(sandbox\_id) class method.32  
3. **Timeout:** Sandboxes have an inactivity timeout. If no operations are performed for the duration of the timeout period, the sandbox may be automatically shut down. The default timeout is often 300 seconds (5 minutes), but this can be configured using the timeout parameter during creation or modified later using sandbox.set\_timeout(timeout\_seconds).31 Maximum timeout values may differ based on E2B subscription tiers.32  
4. **Closing/Killing:** Explicitly closing the sandbox when finished is vital to release cloud resources and stop billing.  
   * **Context Manager (Recommended):** Using with Sandbox() as sandbox: automatically calls the necessary cleanup logic (likely sandbox.close()) upon exiting the block.1  
   * **Explicit Call:** Manually call sandbox.close() or sandbox.kill().18 kill implies a more forceful termination.  
   * **Static Call:** The static method Sandbox.kill(sandbox\_id) can terminate a sandbox without needing an instance connected to it.33  
5. **Listing:** The Sandbox.list() static method can be used to retrieve information about currently running sandboxes associated with the API key.32  
6. **Status Check:** The sandbox.is\_running() method can check if a connected sandbox instance is currently active.33

### **D. Asynchronous Operations**

Many interactions with the E2B sandbox involve network communication and potentially long-running operations. Consequently, the SDK heavily utilizes asynchronous programming patterns. Examples found in the E2B documentation and cookbook frequently use Python's async and await keywords.10 The core SDK reference even has distinct sections for synchronous (sandbox\_sync) and asynchronous (sandbox\_async) operations, suggesting both might be relevant depending on the context or specific SDK version/layer.32

Developers using the e2b-code-interpreter SDK should generally expect to work within an asynchronous context (e.g., using asyncio) for methods like Sandbox.create(), sandbox.run\_code(), filesystem operations, and process interactions, as indicated by examples.10 While the basic with Sandbox() context manager might appear synchronous 8, the underlying operations it triggers likely involve asynchronous communication.

## **IV. API Reference**

This section details the public modules, classes, methods, properties, data models, and exceptions provided by the e2b-code-interpreter Python SDK, based on available documentation and examples.

*Note: Due to inaccessible source code files, some details are inferred from documentation (e.g., SDK Reference v1.0.0, v1.0.2, v1.3.2 21) and usage patterns.*

### **A. e2b\_code\_interpreter Module Exports**

The primary entry point for using the SDK is the e2b\_code\_interpreter package. Key public exports likely include:

* **Classes:**  
  * Sandbox: The main class for interacting with code interpreter sandboxes.1  
  * CodeInterpreter: Potentially an alias or related class, seen in some examples, possibly representing the Jupyter interaction layer.10 *Note: Some sources suggest CodeInterpreter might be deprecated or refactored into Sandbox methods.42 This reference focuses on Sandbox as the primary documented interface.*  
* **Data Models:** Classes representing structured data returned by the SDK (e.g., Execution, Result, Logs, FileInfo, ProcessInfo). These are detailed in Section IV.F.  
* **Exceptions:** Custom exception classes for error handling (e.g., SandboxException, TimeoutException, APIError). These are detailed in Section IV.G.

### **B. Sandbox Class**

The central class for creating, managing, and interacting with E2B code interpreter sandboxes.

* **Description:** Provides methods for stateful code execution (via run\_code or potentially notebook.exec\_cell), filesystem manipulation, process management, and terminal interaction within a secure, isolated cloud environment.  
* **Initialization / Connection:**

| Method Signature | Description | Parameters | Return Type | Source |
| :---- | :---- | :---- | :---- | :---- |
| \_\_init\_\_(self, template: Optional\[str\] \= None, api\_key: Optional\[str\] \= None, cwd: Optional\[str\] \= None, envs: Optional\[Dict\[str, str\]\] \= None, timeout: Optional\[int\] \= None, metadata: Optional\[Dict\[str, str\]\] \= None, sandbox\_id: Optional\[str\] \= None, request\_timeout: Optional\[float\] \= None,...) | Initializes a new Sandbox instance or connects to an existing one if sandbox\_id is provided. | template: Sandbox template ID/name.\<br\>api\_key: E2B API Key (defaults to env var).\<br\>cwd: Initial working directory.\<br\>envs: Environment variables.\<br\>timeout: Sandbox inactivity timeout (seconds).\<br\>metadata: Custom key-value metadata.\<br\>sandbox\_id: ID of existing sandbox to connect to.\<br\>request\_timeout: Timeout for API requests (seconds). | Sandbox instance | 32 |
| create(cls, template: Optional\[str\] \= None,...) | Asynchronous class method to create a new Sandbox instance. Likely preferred for async usage. | Parameters similar to \_\_init\_\_. | Awaitable | 2 |
| connect(cls, sandbox\_id: str, api\_key: Optional\[str\] \= None,...) | Asynchronous class method to connect to an existing Sandbox instance. | sandbox\_id: ID of the sandbox.\<br\>api\_key: E2B API Key.\<br\>... | Awaitable | 32 |
| reconnect(cls, sandbox\_id: str,...) | Synchronous class method to connect to an existing Sandbox instance (seen in specific examples). | sandbox\_id: ID of the sandbox.\<br\>... | Sandbox | 43 |

* **Sandbox Methods:**

| Method Signature | Description | Parameters | Return Type | Source |
| :---- | :---- | :---- | :---- | :---- |
| run\_code(self, code: str, on\_stdout: Optional\[Callable\[\[Dict\], Any\]\] \= None, on\_stderr: Optional\[Callable\[\[Dict\], Any\]\] \= None, on\_results: Optional\[Callable\[\[Dict\], Any\]\] \= None, timeout: Optional\[float\] \= None, cwd: Optional\[str\] \= None, envs: Optional\[Dict\[str, str\]\] \= None,...) | Executes Python code within the sandbox, supporting state persistence and streaming callbacks. | code: Python code string.\<br\>on\_stdout: Callback for stdout lines.\<br\>on\_stderr: Callback for stderr lines.\<br\>on\_results: Callback for rich results (plots, etc.).\<br\>timeout: Execution timeout (seconds).\<br\>cwd: Working directory for execution.\<br\>envs: Environment variables for execution. | Awaitable\[Execution\] or Execution | 1 |
| notebook.exec\_cell(self, code: str, on\_stdout: Optional\[Callable\] \= None,...) | Executes code as if in a Jupyter notebook cell. Likely similar to run\_code, potentially the underlying mechanism. | Parameters similar to run\_code. | Awaitable\[Execution\] or Execution | 14 |
| close(self) \-\> None | Closes the connection to the sandbox and releases resources. Automatically called by with statement. | None | Awaitable\[None\] or None | 18 |
| kill(self, request\_timeout: Optional\[float\] \= None) | Forcefully terminates the sandbox instance. | request\_timeout: API request timeout. | Awaitable\[bool\] or bool | 33 |
| kill(cls, sandbox\_id: str, api\_key: Optional\[str\] \= None,...) | Static method to kill a sandbox by ID. | sandbox\_id: ID of sandbox to kill.\<br\>api\_key: E2B API Key.\<br\>... | Awaitable\[bool\] or bool | 33 |
| set\_timeout(self, timeout: int, request\_timeout: Optional\[float\] \= None) | Sets the inactivity timeout for the current sandbox instance. | timeout: New timeout in seconds.\<br\>request\_timeout: API request timeout. | Awaitable\[None\] or None | 32 |
| set\_timeout(cls, sandbox\_id: str, timeout: int,...) | Static method to set the timeout for a sandbox by ID. | sandbox\_id: ID of sandbox.\<br\>timeout: New timeout in seconds.\<br\>... | Awaitable\[None\] or None | 32 |
| is\_running(self, request\_timeout: Optional\[float\] \= None) | Checks if the sandbox instance is currently running. | request\_timeout: API request timeout. | Awaitable\[bool\] or bool | 33 |
| list(cls, api\_key: Optional\[str\] \= None,...) | Static method to list all running sandboxes for the API key. | api\_key: E2B API Key.\<br\>... | Awaitable\] or List | 32 |

* **Sandbox Properties:**

| Property Name | Return Type | Description | Source |
| :---- | :---- | :---- | :---- |
| filesystem | Filesystem | Provides access to filesystem operations within the sandbox. | 31 |
| process or commands | Process or Commands | Provides access to process execution and management within the sandbox. | 33 |
| terminal or pty | Terminal or Pty | Provides access to pseudo-terminal (PTY) interaction within the sandbox. | 33 |
| notebook | Notebook | Provides access to notebook-specific operations like exec\_cell. | 14 |
| sandbox\_id | str | The unique identifier of the connected sandbox instance. | 33 |

### **C. Filesystem Interaction (via Sandbox.filesystem)**

Provides methods to manage files and directories within the sandbox's virtual filesystem.

* **Table: Filesystem Methods (likely async):**

| Method Signature | Description | Parameters | Return Type | Source |
| :---- | :---- | :---- | :---- | :---- |
| list(self, path: str, user: Optional\[str\] \= "user",...) | Lists files and directories at the specified path. | path: Directory path.\<br\>user: User context. | Awaitable\[List\[FileInfo\]\] | 31 |
| read(self, path: str, format: Literal\["text", "bytes", "stream"\] \= "text", user: Optional\[str\] \= "user",...) | Reads the content of a file. | path: File path.\<br\>format: Return format ('text', 'bytes', or 'stream').\<br\>user: User context. | Awaitable\[Union\[str, bytes, AsyncIterator\[bytes\]\]\] | 32 |
| write(self, path: str, data: Union\[str, bytes, IO, AsyncIterable\[bytes\]\], user: Optional\[str\] \= "user",...) | Writes data to a file, creating it if necessary. | path: File path.\<br\>data: Content to write (str, bytes, file-like obj, async iterable).\<br\>user: User context. | Awaitable\[FileInfo\] | 32 |
| remove(self, path: str, user: Optional\[str\] \= "user",...) | Removes a file or directory recursively. | path: Path to remove.\<br\>user: User context. | Awaitable\[None\] | 32 |
| rename(self, old\_path: str, new\_path: str, user: Optional\[str\] \= "user",...) | Renames or moves a file or directory. | old\_path: Current path.\<br\>new\_path: Target path.\<br\>user: User context. | Awaitable\[FileInfo\] | 32 |
| make\_dir(self, path: str, user: Optional\[str\] \= "user",...) | Creates a directory, including parent directories if needed. | path: Directory path to create.\<br\>user: User context. | Awaitable\[bool\] | 32 |
| exists(self, path: str, user: Optional\[str\] \= "user",...) | Checks if a file or directory exists at the path. | path: Path to check.\<br\>user: User context. | Awaitable\[bool\] | 33 |
| watch\_dir(self, path: str, on\_event: Callable\[\[FilesystemEvent\], Any\], user: Optional\[str\] \= "user",...) | Watches a directory for filesystem events (create, delete, modify). | path: Directory path.\<br\>on\_event: Callback for events.\<br\>user: User context. | Awaitable\[WatchHandle\] | 32 |

### **D. Process Management (via Sandbox.process or Sandbox.commands)**

Enables execution and management of arbitrary system processes within the sandbox.

* **Table: Process/Commands Methods (likely async):**

| Method Signature | Description | Parameters | Return Type | Source |
| :---- | :---- | :---- | :---- | :---- |
| start(self, cmd: str, on\_stdout: Optional\[Callable\] \= None, on\_stderr: Optional\[Callable\] \= None, timeout: Optional\[float\] \= 60, cwd: Optional\[str\] \= None, envs: Optional\[Dict\[str, str\]\] \= None, user: Optional\[str\] \= "user", background: bool \= False,...) | Starts a new process. Returns result if background=False, handle if background=True. (May be named run). | cmd: Command string.\<br\>on\_stdout/on\_stderr: Streaming callbacks.\<br\>timeout: Execution timeout.\<br\>cwd: Working directory.\<br\>envs: Environment variables.\<br\>user: User context.\<br\>background: Run in background? | Awaitable\[Union\[ProcessExecution, ProcessHandle\]\] | 32 |
| list(self,...) | Lists currently running processes started via this interface. | ... | Awaitable\[List\[ProcessInfo\]\] | 32 |
| kill(self, pid: int,...) | Kills a running process by its Process ID (PID). | pid: Process ID.\<br\>... | Awaitable\[bool\] | 32 |
| send\_stdin(self, pid: int, data: str,...) | Sends data to the standard input of a running process. | pid: Process ID.\<br\>data: String data to send.\<br\>... | Awaitable\[None\] | 32 |

### **E. Terminal (PTY) Interaction (via Sandbox.terminal or Sandbox.pty)**

Provides an interactive pseudo-terminal (PTY) session.

* **Table: Terminal/Pty Methods (likely async):**

| Method Signature | Description | Parameters | Return Type | Source |
| :---- | :---- | :---- | :---- | :---- |
| start(self, on\_data: Callable\[\[bytes\], Any\], size: Optional\] \= None, cmd: Optional\[str\] \= None, cwd: Optional\[str\] \= None, envs: Optional\[Dict\[str, str\]\] \= None, user: Optional\[str\] \= "user", timeout: Optional\[float\] \= 60,...) | Starts a new PTY session. (May be named create). | on\_data: Callback for PTY output data.\<br\>size: Initial terminal dimensions (rows, cols).\<br\>cmd: Optional command to run (defaults to shell).\<br\>cwd: Working directory.\<br\>envs: Environment variables.\<br\>user: User context.\<br\>timeout: Session timeout. | Awaitable\[PtyHandle\] | 32 |
| send\_data(self, pid: int, data: bytes,...) | Sends byte data to the PTY's input. (May be named send\_input or send\_stdin). | pid: PTY Process ID (from handle).\<br\>data: Bytes to send.\<br\>... | Awaitable\[None\] | 32 |
| resize(self, pid: int, size: Tuple\[int, int\],...) | Resizes the PTY. | pid: PTY Process ID.\<br\>size: New dimensions (rows, cols).\<br\>... | Awaitable\[None\] | 32 |
| kill(self, pid: int,...) | Terminates the PTY session. | pid: PTY Process ID.\<br\>... | Awaitable\[bool\] | 32 |

### **F. Data Models**

These classes define the structure of data returned by various SDK methods.

* **Execution Model Attributes:** Represents the result of run\_code or exec\_cell.

| Attribute Name | Type | Description | Source |
| :---- | :---- | :---- | :---- |
| text | Optional\[str\] | Primary textual output/result. | 1 |
| stdout | Optional\[str\] | Captured standard output (may be part of logs). | 10 |
| stderr | Optional\[str\] | Captured standard error (may be part of logs). | \- |
| logs | Optional\[Logs\] | Structured object containing stdout and stderr lines with timestamps. | 14 |
| results | List | List of rich results (plots, tables, HTML, etc.). | 14 |
| error | Optional\[Error\] | Object containing details if a runtime error occurred. | 10 |
| is\_error | bool | True if a runtime error occurred during execution. | \- |
| created\_at | datetime | Timestamp when execution started. | \- |
| finished\_at | datetime | Timestamp when execution finished. | \- |

* **Result Model Attributes:** Represents a single rich output item from Execution.results.

| Attribute Name | Type | Description | Source |
| :---- | :---- | :---- | :---- |
| text | Optional\[str\] | Plain text representation (MIME type text/plain). | 14 |
| html | Optional\[str\] | HTML representation (MIME type text/html). | 14 |
| png | Optional\[str\] | Base64 encoded PNG image data (MIME type image/png). | 14 |
| jpeg | Optional\[str\] | Base64 encoded JPEG image data (MIME type image/jpeg). | \- |
| pdf | Optional\[str\] | Base64 encoded PDF data (MIME type application/pdf). | \- |
| svg | Optional\[str\] | SVG image representation (MIME type image/svg+xml). | \- |
| latex | Optional\[str\] | LaTeX representation (MIME type text/latex). | \- |
| json | Optional\[Any\] | JSON data (MIME type application/json). | \- |
| markdown | Optional\[str\] | Markdown text (MIME type text/markdown). | \- |
| mime\_type | str | The specific MIME type of the result. | \- |
| raw | Any | The raw data before encoding (e.g., bytes for images). | \- |

* **FileInfo Model Attributes:** Represents a file or directory entry.

| Attribute Name | Type | Description | Source |
| :---- | :---- | :---- | :---- |
| name | str | Name of the file or directory. | 32 |
| is\_dir | bool | True if the entry is a directory. | 32 |
| size | Optional\[int\] | Size in bytes (for files). | 32 |

* **ProcessInfo Model Attributes:** Represents a running process.

| Attribute Name | Type | Description | Source |
| :---- | :---- | :---- | :---- |
| pid | int | Process ID. | 32 |
| cmd | str | Command executed. | 32 |
| user | Optional\[str\] | User running the process. | 32 |
| cwd | Optional\[str\] | Current working directory. | 32 |
| envs | Optional\[Dict\[str, str\]\] | Environment variables. | 32 |

* *(Other potential models: Logs, Error, WatchHandle, ProcessExecution, PtyHandle, SandboxInfo, FilesystemEvent)*

### **G. Exceptions**

Custom exceptions provide specific error information, enabling more robust error handling.

* **Table: Custom Exceptions:**

| Exception Class | Base Class | Description | Source |
| :---- | :---- | :---- | :---- |
| E2BException | Exception | Base class for all exceptions raised by the E2B SDKs. | Inferred |
| SandboxException | E2BException | General error related to sandbox operations (e.g., connection issues, internal errors). | Inferred |
| TimeoutException | E2BException | Raised when an operation times out (e.g., sandbox creation, code execution, API request). | 45 (suggested need) |
| APIError | E2BException | Base class for errors originating from the E2B backend API. | Inferred |
| AuthenticationError | APIError | Raised due to an invalid or missing API key. | 19 (implied) |
| RateLimitException | APIError | Raised when the E2B API rate limit is exceeded. | 46 |
| NotFoundError | E2BException | Raised when a requested resource (e.g., sandbox, file, process) is not found. | Inferred |
| FilesystemError | SandboxException | Raised during a failed filesystem operation within the sandbox. | Inferred |
| ProcessError | SandboxException | Raised during a failed process execution or management operation. | Inferred |
| TerminalError | SandboxException | Raised during a failed PTY interaction. | Inferred |
| CodeExecutionError | SandboxException | Specifically indicates an error during the execution of user-provided code within the interpreter (distinct from SDK/API errors). | Inferred |

## **V. Advanced Topics**

### **A. Streaming Output and Results**

The SDK provides mechanisms to handle output and results from code execution in real-time, rather than waiting for the entire execution to complete. This is achieved through callback functions passed to methods like run\_code or notebook.exec\_cell.44

* **Callbacks:**  
  * on\_stdout: A function executed for each line written to standard output.  
  * on\_stderr: A function executed for each line written to standard error.  
  * on\_results: A function executed when a rich result (like a plot generated by matplotlib) is produced.  
* **Callback Data:** The data passed to on\_stdout and on\_stderr callbacks is typically a dictionary containing the output line (string), a boolean error flag, and a timestamp.44 The data for on\_results is a dictionary representing the Result model (see Section IV.F).  
* **Use Cases:** Streaming is beneficial for long-running code executions, providing immediate feedback to users or logging systems. It's also essential for displaying intermediate results or building interactive applications where output needs to be shown progressively.44

**Example (Conceptual):**

Python

from e2b\_code\_interpreter import Sandbox, Execution, Result, Logs  
from typing import Dict, Any, List, Optional, Tuple  
import asyncio  
import base64 \# For handling image data

async def handle\_stdout(log: Dict):  
    print(f"STDOUT: {log.get('line', '').strip()}")

async def handle\_stderr(log: Dict):  
    print(f"STDERR: {log.get('line', '').strip()}")

async def handle\_result(result\_data: Dict):  
    \# Assuming result\_data is a dictionary representation of the Result model  
    print(f"RESULT Received (Type: {result\_data.get('mime\_type')})")  
    if result\_data.get('mime\_type') \== 'image/png' and result\_data.get('png'):  
        try:  
            png\_data \= base64.b64decode(result\_data\['png'\])  
            filename \= f"streamed\_chart\_{result\_data.get('timestamp', 'unknown')}.png"  
            with open(filename, "wb") as f:  
                f.write(png\_data)  
            print(f"Saved streamed chart to {filename}")  
        except Exception as e:  
            print(f"Error saving streamed PNG: {e}")  
    elif result\_data.get('text'):  
         print(f"Result Text: {result\_data\['text'\]}")

async def main():  
    code\_with\_plot \= """  
import matplotlib.pyplot as plt  
import numpy as np  
import time

print("Generating plot...")  
time.sleep(1) \# Simulate work

x \= np.linspace(0, 2 \* np.pi, 100\)  
y \= np.sin(x)

plt.figure()  
plt.plot(x, y)  
plt.title('Streamed Sine Wave')  
plt.show() \# This generates a result

print("Plot generated.")  
time.sleep(1)  
print("Calculation finished.", file=\_\_import\_\_('sys').stderr)  
"""  
    try:  
        async with Sandbox() as sandbox:  
            print("Starting execution with streaming...")  
            execution: Execution \= await sandbox.run\_code(  
                code\_with\_plot,  
                on\_stdout=handle\_stdout,  
                on\_stderr=handle\_stderr,  
                on\_results=handle\_result,  
            )  
            print("\\nExecution finished.")  
            if execution.error:  
                print(f"Execution Error: {execution.error.name} \- {execution.error.value}")  
            \# Final results are also available after completion  
            \# print(f"Final Logs: {execution.logs}")  
            \# print(f"Final Results: {execution.results}")

    except Exception as e:  
        print(f"An error occurred: {e}")

if \_\_name\_\_ \== "\_\_main\_\_":  
    asyncio.run(main())

14

This pattern allows applications to react instantly as output or results become available.

### **B. Custom Sandbox Templates**

While the default e2b-code-interpreter sandbox environment comes pre-configured (e.g., with common data science libraries), developers can create custom sandbox environments using templates.34

* **Purpose:** Custom templates allow pre-installing specific packages, adding custom files, or configuring the environment before the sandbox starts.  
* **Benefits:**  
  * **Faster Startup:** Avoids the need to install packages at runtime for every sandbox session, reducing startup latency.35  
  * **Consistency:** Ensures a standardized environment across all sandbox instances using the template.  
  * **Customization:** Tailors the sandbox environment precisely to the application's needs.  
* **Creation Process (using E2B CLI):**  
  1. Install E2B CLI: npm i \-g @e2b/cli.35  
  2. Login: e2b auth login.35  
  3. Initialize Template: e2b template init (creates e2b.Dockerfile and e2b.toml).35  
  4. Edit e2b.Dockerfile: Start with FROM e2bdev/code-interpreter:latest and add RUN commands (e.g., RUN pip install pandas numpy, RUN apt-get update && apt-get install \-y some-tool).34 Add custom files using COPY.  
  5. Build Template: e2b template build \--name my-custom-template \[-c "/path/to/start-command.sh"\].34 This uploads and builds the template, providing a template ID upon completion.34  
* **Usage:** Instantiate the Sandbox class using the template parameter with the custom template ID or name:  
  Python  
  from e2b\_code\_interpreter import Sandbox

  \# Use the ID or name provided after 'e2b template build'  
  with Sandbox(template="my-custom-template") as sandbox:  
      \# Sandbox starts with pre-installed packages/files  
      execution \= sandbox.run\_code("import pandas; print(pandas.\_\_version\_\_)")  
      print(execution.text)  
  34

Custom templates offer a powerful way to optimize and standardize the sandbox environment for production use cases.

## **VI. Conclusion**

### **A. Summary of SDK Capabilities**

The e2b-code-interpreter Python SDK provides a robust and secure solution for integrating stateful code execution capabilities into Python applications. It allows developers to leverage E2B's Firecracker-based cloud sandboxes, offering strong isolation for running potentially untrusted code, particularly code generated by AI models. Key features include:

* **Secure Sandboxing:** Execution within isolated microVMs.  
* **Stateful Execution:** Persistence of variables, imports, and filesystem changes within a session, suitable for iterative tasks.  
* **Code Execution:** Running Python code via run\_code or notebook.exec\_cell.  
* **Filesystem Access:** Reading, writing, listing, and managing files and directories.  
* **Process Management:** Starting and managing arbitrary system processes.  
* **Terminal Interaction:** Optional interactive PTY sessions.  
* **Streaming:** Real-time handling of stdout, stderr, and rich results via callbacks.  
* **Customization:** Defining custom sandbox environments using templates.

### **B. Further Resources**

For more detailed information, examples, and community support, refer to the following official resources:

* **E2B Official Documentation:** [https://e2b.dev/docs](https://e2b.dev/docs) 1  
* **e2b-code-interpreter GitHub Repository:** [https://github.com/e2b-dev/code-interpreter](https://github.com/e2b-dev/code-interpreter) 2  
* **E2B Cookbook (Examples):** [https://github.com/e2b-dev/e2b-cookbook](https://github.com/e2b-dev/e2b-cookbook) 1  
* **PyPI Package Page:** [https://pypi.org/project/e2b-code-interpreter/](https://pypi.org/project/e2b-code-interpreter/) 11

#### **Works cited**

1. Code Interpreting for AI apps \- E2B, accessed April 21, 2025, [https://e2b.dev/docs](https://e2b.dev/docs)  
2. e2b-dev/code-interpreter: Python & JS/TS SDK for running AI-generated code/code interpreting in your AI app \- GitHub, accessed April 21, 2025, [https://github.com/e2b-dev/code-interpreter](https://github.com/e2b-dev/code-interpreter)  
3. Is there an open-source alternative to e2b (e2b.dev. Code interpreting for your AI app)? : r/LocalLLaMA \- Reddit, accessed April 21, 2025, [https://www.reddit.com/r/LocalLLaMA/comments/1chsx7z/is\_there\_an\_opensource\_alternative\_to\_e2b\_e2bdev/](https://www.reddit.com/r/LocalLLaMA/comments/1chsx7z/is_there_an_opensource_alternative_to_e2b_e2bdev/)  
4. E2B | Code Interpreting for AI Apps \- GitHub, accessed April 21, 2025, [https://github.com/e2b-dev](https://github.com/e2b-dev)  
5. We built open-source SDK for adding custom code interpreters to AI apps : r/Python \- Reddit, accessed April 21, 2025, [https://www.reddit.com/r/Python/comments/1czr85u/we\_built\_opensource\_sdk\_for\_adding\_custom\_code/](https://www.reddit.com/r/Python/comments/1czr85u/we_built_opensource_sdk_for_adding_custom_code/)  
6. e2b-dev/E2B: Secure open source cloud runtime for AI apps & AI agents \- GitHub, accessed April 21, 2025, [https://github.com/e2b-dev/E2B](https://github.com/e2b-dev/E2B)  
7. e2b · PyPI, accessed April 21, 2025, [https://pypi.org/project/e2b/](https://pypi.org/project/e2b/)  
8. code-interpreter/README.md at main · e2b-dev/code-interpreter ..., accessed April 21, 2025, [https://github.com/e2b-dev/code-interpreter/blob/main/README.md](https://github.com/e2b-dev/code-interpreter/blob/main/README.md)  
9. Show HN: Open-source SDK for creating custom code interpreters with any LLM, accessed April 21, 2025, [https://news.ycombinator.com/item?id=40093257](https://news.ycombinator.com/item?id=40093257)  
10. e2b-cookbook/examples/groq-code-interpreter-python ... \- GitHub, accessed April 21, 2025, [https://github.com/e2b-dev/e2b-cookbook/blob/main/examples/groq-code-interpreter-python/llama\_3\_code\_interpreter.ipynb](https://github.com/e2b-dev/e2b-cookbook/blob/main/examples/groq-code-interpreter-python/llama_3_code_interpreter.ipynb)  
11. e2b-code-interpreter · PyPI, accessed April 21, 2025, [https://pypi.org/project/e2b-code-interpreter/](https://pypi.org/project/e2b-code-interpreter/)  
12. Marker-Inc-Korea/m2b-code-interpreter: Running E2B-style Sandbox on Modal \- GitHub, accessed April 21, 2025, [https://github.com/Marker-Inc-Korea/m2b-code-interpreter](https://github.com/Marker-Inc-Korea/m2b-code-interpreter)  
13. Open source AI analyst powered by E2B. Analyze your CSV files with Llama 3.1 and create interactive charts. \- GitHub, accessed April 21, 2025, [https://github.com/e2b-dev/ai-analyst](https://github.com/e2b-dev/ai-analyst)  
14. Code Interpreting for AI apps \- E2B, accessed April 21, 2025, [https://e2b.dev/docs/legacy/hello-world/py](https://e2b.dev/docs/legacy/hello-world/py)  
15. e2b-dev/fragments: Open-source Next.js template for building apps that are fully generated by AI. By E2B. \- GitHub, accessed April 21, 2025, [https://github.com/e2b-dev/fragments](https://github.com/e2b-dev/fragments)  
16. e2b-dev/e2b-cookbook: Examples of using E2B \- GitHub, accessed April 21, 2025, [https://github.com/e2b-dev/e2b-cookbook](https://github.com/e2b-dev/e2b-cookbook)  
17. Building Open-Source Codebase Copilot with Code Execution Layer \- E2B, accessed April 21, 2025, [https://e2b.dev/blog/building-open-source-codebase-copilot-with-code-execution-layer](https://e2b.dev/blog/building-open-source-codebase-copilot-with-code-execution-layer)  
18. e2b-cookbook/examples/langgraph-python ... \- GitHub, accessed April 21, 2025, [https://github.com/e2b-dev/e2b-cookbook/blob/main/examples/langgraph-python/langgraph\_code\_interpreter.ipynb](https://github.com/e2b-dev/e2b-cookbook/blob/main/examples/langgraph-python/langgraph_code_interpreter.ipynb)  
19. Build LangChain agent with code interpreter — E2B Blog, accessed April 21, 2025, [https://e2b.dev/blog/build-langchain-agent-with-code-interpreter](https://e2b.dev/blog/build-langchain-agent-with-code-interpreter)  
20. Open-source Code Interpreting for AI Apps — E2B, accessed April 21, 2025, [https://e2b.dev/](https://e2b.dev/)  
21. SDK Reference \- E2B \- Code Interpreting for AI apps, accessed April 21, 2025, [https://e2b.dev/docs/sdk-reference](https://e2b.dev/docs/sdk-reference)  
22. accessed January 1, 1970, [https://github.com/e2b-dev/code-interpreter/tree/main/python](https://github.com/e2b-dev/code-interpreter/tree/main/python)  
23. accessed January 1, 1970, [https://github.com/e2b-dev/code-interpreter/tree/main/python/e2b\_code\_interpreter](https://github.com/e2b-dev/code-interpreter/tree/main/python/e2b_code_interpreter)  
24. accessed January 1, 1970, [https://github.com/e2b-dev/code-interpreter/blob/main/python/e2b\_code\_interpreter/sandbox.py](https://github.com/e2b-dev/code-interpreter/blob/main/python/e2b_code_interpreter/sandbox.py)  
25. accessed January 1, 1970, [https://github.com/e2b-dev/code-interpreter/blob/main/python/e2b\_code\_interpreter/notebook.py](https://github.com/e2b-dev/code-interpreter/blob/main/python/e2b_code_interpreter/notebook.py)  
26. accessed January 1, 1970, [https://github.com/e2b-dev/code-interpreter/blob/main/python/e2b\_code\_interpreter/models.py](https://github.com/e2b-dev/code-interpreter/blob/main/python/e2b_code_interpreter/models.py)  
27. accessed January 1, 1970, [https://github.com/e2b-dev/code-interpreter/blob/main/python/e2b\_code\_interpreter/exception.py](https://github.com/e2b-dev/code-interpreter/blob/main/python/e2b_code_interpreter/exception.py)  
28. accessed January 1, 1970, [https://github.com/e2b-dev/code-interpreter/blob/main/python/e2b\_code\_interpreter/\_\_init\_\_.py](https://github.com/e2b-dev/code-interpreter/blob/main/python/e2b_code_interpreter/__init__.py)  
29. E2B Code Interpreter \- PyPI Download Stats, accessed April 21, 2025, [https://pypistats.org/packages/e2b-code-interpreter](https://pypistats.org/packages/e2b-code-interpreter)  
30. e2b-cookbook/examples/codestral-code-interpreter-python/codestral\_code\_interpreter.ipynb at main \- GitHub, accessed April 21, 2025, [https://github.com/e2b-dev/e2b-cookbook/blob/main/examples/codestral-code-interpreter-python/codestral\_code\_interpreter.ipynb](https://github.com/e2b-dev/e2b-cookbook/blob/main/examples/codestral-code-interpreter-python/codestral_code_interpreter.ipynb)  
31. Running your first Sandbox \- E2B \- Code Interpreting for AI apps, accessed April 21, 2025, [https://e2b.dev/docs/quickstart](https://e2b.dev/docs/quickstart)  
32. SandboxApi \- E2B \- Code Interpreting for AI apps, accessed April 21, 2025, [https://e2b.dev/docs/sdk-reference/python-sdk/v1.3.2/sandbox\_async](https://e2b.dev/docs/sdk-reference/python-sdk/v1.3.2/sandbox_async)  
33. Code Interpreting for AI apps \- E2B, accessed April 21, 2025, [https://e2b.dev/docs/sdk-reference/python-sdk/v1.0.0/sandbox\_sync](https://e2b.dev/docs/sdk-reference/python-sdk/v1.0.0/sandbox_sync)  
34. code-interpreter/template/README.md at main \- GitHub, accessed April 21, 2025, [https://github.com/e2b-dev/code-interpreter/blob/main/template/README.md](https://github.com/e2b-dev/code-interpreter/blob/main/template/README.md)  
35. Install custom packages \- E2B \- Code Interpreting for AI apps, accessed April 21, 2025, [https://e2b.dev/docs/quickstart/install-custom-packages](https://e2b.dev/docs/quickstart/install-custom-packages)  
36. e2b-dev/llm-code-interpreter: \[DEPRECATED\] Powered by AI Playgrounds by E2B. Code interpreter on steroids for ChatGPT. Run any language, any terminal process, use filesystem freely. All with access to the internet. \- GitHub, accessed April 21, 2025, [https://github.com/e2b-dev/llm-code-interpreter](https://github.com/e2b-dev/llm-code-interpreter)  
37. Filesystem \- E2B \- Code Interpreting for AI apps, accessed April 21, 2025, [https://e2b.dev/docs/sdk-reference/js-sdk/v1.1.1/filesystem](https://e2b.dev/docs/sdk-reference/js-sdk/v1.1.1/filesystem)  
38. Commands \- E2B \- Code Interpreting for AI apps, accessed April 21, 2025, [https://e2b.dev/docs/sdk-reference/js-sdk/v1.2.4/commands](https://e2b.dev/docs/sdk-reference/js-sdk/v1.2.4/commands)  
39. e2b-cookbook/examples/claude-code-interpreter-python ... \- GitHub, accessed April 21, 2025, [https://github.com/e2b-dev/e2b-cookbook/blob/main/examples/claude-code-interpreter-python/claude\_code\_interpreter.ipynb](https://github.com/e2b-dev/e2b-cookbook/blob/main/examples/claude-code-interpreter-python/claude_code_interpreter.ipynb)  
40. Give LangGraph code execution capabilities \- E2B Blog, accessed April 21, 2025, [https://e2b-blog.framer.website/blog/langgraph-with-code-interpreter-guide-with-code](https://e2b-blog.framer.website/blog/langgraph-with-code-interpreter-guide-with-code)  
41. e2b-cookbook/examples/langchain-python/langchain\_code\_interpreter.ipynb at main, accessed April 21, 2025, [https://github.com/e2b-dev/e2b-cookbook/blob/main/examples/langchain-python/langchain\_code\_interpreter.ipynb](https://github.com/e2b-dev/e2b-cookbook/blob/main/examples/langchain-python/langchain_code_interpreter.ipynb)  
42. ImportError: cannot import name 'CodeInterpreter' from 'e2b\_code\_interpreter' · Issue \#4164, accessed April 21, 2025, [https://github.com/langflow-ai/langflow/issues/4164](https://github.com/langflow-ai/langflow/issues/4164)  
43. ImportError: cannot import name 'CodeInterpreter' from 'e2b\_code\_interpreter' · Issue \#4295, accessed April 21, 2025, [https://github.com/langflow-ai/langflow/issues/4295](https://github.com/langflow-ai/langflow/issues/4295)  
44. Streaming \- E2B \- Code Interpreting for AI apps, accessed April 21, 2025, [https://e2b.dev/docs/code-interpreting/streaming](https://e2b.dev/docs/code-interpreting/streaming)  
45. WebSocket exception leading to program being stuck · Issue \#429 · e2b-dev/E2B \- GitHub, accessed April 21, 2025, [https://github.com/e2b-dev/E2B/issues/429](https://github.com/e2b-dev/E2B/issues/429)  
46. Code Interpreting for AI apps \- E2B, accessed April 21, 2025, [https://e2b.dev/docs/api-reference/python-sdk/v1.0.4/exceptions](https://e2b.dev/docs/api-reference/python-sdk/v1.0.4/exceptions)